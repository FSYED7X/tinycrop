"use strict";

var BackgroundLayer = function BackgroundLayer(opts) {
  opts = opts || {};

  this.colors = opts.colors;

  this.parent = opts.parent;
  this.context = opts.context;
  this.isDirty = true;
};

BackgroundLayer.create = function (opts) {
  return new BackgroundLayer(opts);
};

BackgroundLayer.prototype.revalidate = function () {
  this.isDirty = true;
};

BackgroundLayer.prototype.setColors = function (colors) {
  this.colors = colors;
};

BackgroundLayer.prototype.paint = function () {
  if (this.isDirty) {
    var parent = this.parent;
    var g = this.context;

    if (!this.colors || !this.colors.length) {
      g.clearRect(0, 0, parent.width, parent.height);
    } else {
      g.fillStyle = this.colors[0];
      g.fillRect(0, 0, parent.width, parent.height);
    }

    if (this.colors && this.colors.length > 1) {
      var h = parent.height;

      var cols = 32;
      var size = parent.width / cols;
      var rows = Math.ceil(h / size);

      g.fillStyle = this.colors[1];
      for (var i = 0; i < cols; i += 1) {
        for (var j = 0; j < rows; j += 1) {
          if ((i + j) % 2 === 0) {
            g.fillRect(i * size, j * size, size, size);
          }
        }
      }
    }

    this.isDirty = false;
  }
};

module.exports = BackgroundLayer;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9CYWNrZ3JvdW5kTGF5ZXIuanMiXSwibmFtZXMiOlsiQmFja2dyb3VuZExheWVyIiwib3B0cyIsImNvbG9ycyIsInBhcmVudCIsImNvbnRleHQiLCJpc0RpcnR5IiwiY3JlYXRlIiwicHJvdG90eXBlIiwicmV2YWxpZGF0ZSIsInNldENvbG9ycyIsInBhaW50IiwiZyIsImxlbmd0aCIsImNsZWFyUmVjdCIsIndpZHRoIiwiaGVpZ2h0IiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJoIiwiY29scyIsInNpemUiLCJyb3dzIiwiTWF0aCIsImNlaWwiLCJpIiwiaiIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSUEsa0JBQWtCLFNBQWxCQSxlQUFrQixDQUFVQyxJQUFWLEVBQWdCO0FBQ3BDQSxTQUFPQSxRQUFRLEVBQWY7O0FBRUEsT0FBS0MsTUFBTCxHQUFjRCxLQUFLQyxNQUFuQjs7QUFFQSxPQUFLQyxNQUFMLEdBQWNGLEtBQUtFLE1BQW5CO0FBQ0EsT0FBS0MsT0FBTCxHQUFlSCxLQUFLRyxPQUFwQjtBQUNBLE9BQUtDLE9BQUwsR0FBZSxJQUFmO0FBQ0QsQ0FSRDs7QUFVQUwsZ0JBQWdCTSxNQUFoQixHQUF5QixVQUFVTCxJQUFWLEVBQWdCO0FBQ3ZDLFNBQU8sSUFBSUQsZUFBSixDQUFvQkMsSUFBcEIsQ0FBUDtBQUNELENBRkQ7O0FBSUFELGdCQUFnQk8sU0FBaEIsQ0FBMEJDLFVBQTFCLEdBQXVDLFlBQVk7QUFDakQsT0FBS0gsT0FBTCxHQUFlLElBQWY7QUFDRCxDQUZEOztBQUlBTCxnQkFBZ0JPLFNBQWhCLENBQTBCRSxTQUExQixHQUFzQyxVQUFVUCxNQUFWLEVBQWtCO0FBQ3RELE9BQUtBLE1BQUwsR0FBY0EsTUFBZDtBQUNELENBRkQ7O0FBSUFGLGdCQUFnQk8sU0FBaEIsQ0FBMEJHLEtBQTFCLEdBQWtDLFlBQVk7QUFDNUMsTUFBSSxLQUFLTCxPQUFULEVBQWtCO0FBQ2hCLFFBQUlGLFNBQVMsS0FBS0EsTUFBbEI7QUFDQSxRQUFJUSxJQUFJLEtBQUtQLE9BQWI7O0FBRUEsUUFBSSxDQUFDLEtBQUtGLE1BQU4sSUFBZ0IsQ0FBQyxLQUFLQSxNQUFMLENBQVlVLE1BQWpDLEVBQXlDO0FBQ3ZDRCxRQUFFRSxTQUFGLENBQVksQ0FBWixFQUFlLENBQWYsRUFBa0JWLE9BQU9XLEtBQXpCLEVBQWdDWCxPQUFPWSxNQUF2QztBQUNELEtBRkQsTUFFTztBQUNMSixRQUFFSyxTQUFGLEdBQWMsS0FBS2QsTUFBTCxDQUFZLENBQVosQ0FBZDtBQUNBUyxRQUFFTSxRQUFGLENBQVcsQ0FBWCxFQUFjLENBQWQsRUFBaUJkLE9BQU9XLEtBQXhCLEVBQStCWCxPQUFPWSxNQUF0QztBQUNEOztBQUVELFFBQUksS0FBS2IsTUFBTCxJQUFlLEtBQUtBLE1BQUwsQ0FBWVUsTUFBWixHQUFxQixDQUF4QyxFQUEyQztBQUN6QyxVQUFJTSxJQUFJZixPQUFPWSxNQUFmOztBQUVBLFVBQUlJLE9BQU8sRUFBWDtBQUNBLFVBQUlDLE9BQU9qQixPQUFPVyxLQUFQLEdBQWVLLElBQTFCO0FBQ0EsVUFBSUUsT0FBT0MsS0FBS0MsSUFBTCxDQUFVTCxJQUFJRSxJQUFkLENBQVg7O0FBRUFULFFBQUVLLFNBQUYsR0FBYyxLQUFLZCxNQUFMLENBQVksQ0FBWixDQUFkO0FBQ0EsV0FBSyxJQUFJc0IsSUFBSSxDQUFiLEVBQWdCQSxJQUFJTCxJQUFwQixFQUEwQkssS0FBSyxDQUEvQixFQUFrQztBQUNoQyxhQUFLLElBQUlDLElBQUksQ0FBYixFQUFnQkEsSUFBSUosSUFBcEIsRUFBMEJJLEtBQUssQ0FBL0IsRUFBa0M7QUFDaEMsY0FBSSxDQUFDRCxJQUFJQyxDQUFMLElBQVUsQ0FBVixLQUFnQixDQUFwQixFQUF1QjtBQUNyQmQsY0FBRU0sUUFBRixDQUFXTyxJQUFJSixJQUFmLEVBQXFCSyxJQUFJTCxJQUF6QixFQUErQkEsSUFBL0IsRUFBcUNBLElBQXJDO0FBQ0Q7QUFDRjtBQUNGO0FBQ0Y7O0FBRUQsU0FBS2YsT0FBTCxHQUFlLEtBQWY7QUFDRDtBQUNGLENBL0JEOztBQWlDQXFCLE9BQU9DLE9BQVAsR0FBaUIzQixlQUFqQiIsImZpbGUiOiJCYWNrZ3JvdW5kTGF5ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQmFja2dyb3VuZExheWVyID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgb3B0cyA9IG9wdHMgfHwge31cblxuICB0aGlzLmNvbG9ycyA9IG9wdHMuY29sb3JzXG5cbiAgdGhpcy5wYXJlbnQgPSBvcHRzLnBhcmVudFxuICB0aGlzLmNvbnRleHQgPSBvcHRzLmNvbnRleHRcbiAgdGhpcy5pc0RpcnR5ID0gdHJ1ZVxufVxuXG5CYWNrZ3JvdW5kTGF5ZXIuY3JlYXRlID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgcmV0dXJuIG5ldyBCYWNrZ3JvdW5kTGF5ZXIob3B0cylcbn1cblxuQmFja2dyb3VuZExheWVyLnByb3RvdHlwZS5yZXZhbGlkYXRlID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmlzRGlydHkgPSB0cnVlXG59XG5cbkJhY2tncm91bmRMYXllci5wcm90b3R5cGUuc2V0Q29sb3JzID0gZnVuY3Rpb24gKGNvbG9ycykge1xuICB0aGlzLmNvbG9ycyA9IGNvbG9yc1xufVxuXG5CYWNrZ3JvdW5kTGF5ZXIucHJvdG90eXBlLnBhaW50ID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5pc0RpcnR5KSB7XG4gICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50XG4gICAgdmFyIGcgPSB0aGlzLmNvbnRleHRcblxuICAgIGlmICghdGhpcy5jb2xvcnMgfHwgIXRoaXMuY29sb3JzLmxlbmd0aCkge1xuICAgICAgZy5jbGVhclJlY3QoMCwgMCwgcGFyZW50LndpZHRoLCBwYXJlbnQuaGVpZ2h0KVxuICAgIH0gZWxzZSB7XG4gICAgICBnLmZpbGxTdHlsZSA9IHRoaXMuY29sb3JzWzBdXG4gICAgICBnLmZpbGxSZWN0KDAsIDAsIHBhcmVudC53aWR0aCwgcGFyZW50LmhlaWdodClcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb2xvcnMgJiYgdGhpcy5jb2xvcnMubGVuZ3RoID4gMSkge1xuICAgICAgdmFyIGggPSBwYXJlbnQuaGVpZ2h0XG5cbiAgICAgIHZhciBjb2xzID0gMzJcbiAgICAgIHZhciBzaXplID0gcGFyZW50LndpZHRoIC8gY29sc1xuICAgICAgdmFyIHJvd3MgPSBNYXRoLmNlaWwoaCAvIHNpemUpXG5cbiAgICAgIGcuZmlsbFN0eWxlID0gdGhpcy5jb2xvcnNbMV1cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sczsgaSArPSAxKSB7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcm93czsgaiArPSAxKSB7XG4gICAgICAgICAgaWYgKChpICsgaikgJSAyID09PSAwKSB7XG4gICAgICAgICAgICBnLmZpbGxSZWN0KGkgKiBzaXplLCBqICogc2l6ZSwgc2l6ZSwgc2l6ZSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmlzRGlydHkgPSBmYWxzZVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQmFja2dyb3VuZExheWVyXG4iXX0=