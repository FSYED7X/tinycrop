"use strict";

var Listeners = function Listeners(opts) {
  this.events = {};
};

Listeners.create = function (opts) {
  return new Listeners(opts);
};

Listeners.prototype.on = function (type, fn) {
  if (!this.events[type]) {
    this.events[type] = [];
  }

  if (this.events[type].indexOf(fn) === -1) {
    this.events[type].push(fn);
  }

  return this;
};

Listeners.prototype.off = function (type, fn) {
  if (this.events[type]) {
    var i = this.events[type].indexOf(fn);
    if (i !== -1) {
      this.events[type].splice(i, 1);
    }
  }

  return this;
};

Listeners.prototype.notify = function (type, data) {
  if (this.events[type]) {
    this.events[type].forEach(function (fn) {
      fn.call(this, data);
    }.bind(this));
  }
};

Listeners.prototype.clearAll = function () {
  this.events = {};
};

module.exports = Listeners;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9MaXN0ZW5lcnMuanMiXSwibmFtZXMiOlsiTGlzdGVuZXJzIiwib3B0cyIsImV2ZW50cyIsImNyZWF0ZSIsInByb3RvdHlwZSIsIm9uIiwidHlwZSIsImZuIiwiaW5kZXhPZiIsInB1c2giLCJvZmYiLCJpIiwic3BsaWNlIiwibm90aWZ5IiwiZGF0YSIsImZvckVhY2giLCJjYWxsIiwiYmluZCIsImNsZWFyQWxsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJQSxZQUFZLFNBQVpBLFNBQVksQ0FBVUMsSUFBVixFQUFnQjtBQUM5QixPQUFLQyxNQUFMLEdBQWMsRUFBZDtBQUNELENBRkQ7O0FBSUFGLFVBQVVHLE1BQVYsR0FBbUIsVUFBVUYsSUFBVixFQUFnQjtBQUNqQyxTQUFPLElBQUlELFNBQUosQ0FBY0MsSUFBZCxDQUFQO0FBQ0QsQ0FGRDs7QUFJQUQsVUFBVUksU0FBVixDQUFvQkMsRUFBcEIsR0FBeUIsVUFBVUMsSUFBVixFQUFnQkMsRUFBaEIsRUFBb0I7QUFDM0MsTUFBSSxDQUFDLEtBQUtMLE1BQUwsQ0FBWUksSUFBWixDQUFMLEVBQXdCO0FBQ3RCLFNBQUtKLE1BQUwsQ0FBWUksSUFBWixJQUFvQixFQUFwQjtBQUNEOztBQUVELE1BQUksS0FBS0osTUFBTCxDQUFZSSxJQUFaLEVBQWtCRSxPQUFsQixDQUEwQkQsRUFBMUIsTUFBa0MsQ0FBQyxDQUF2QyxFQUEwQztBQUN4QyxTQUFLTCxNQUFMLENBQVlJLElBQVosRUFBa0JHLElBQWxCLENBQXVCRixFQUF2QjtBQUNEOztBQUVELFNBQU8sSUFBUDtBQUNELENBVkQ7O0FBWUFQLFVBQVVJLFNBQVYsQ0FBb0JNLEdBQXBCLEdBQTBCLFVBQVVKLElBQVYsRUFBZ0JDLEVBQWhCLEVBQW9CO0FBQzVDLE1BQUksS0FBS0wsTUFBTCxDQUFZSSxJQUFaLENBQUosRUFBdUI7QUFDckIsUUFBSUssSUFBSSxLQUFLVCxNQUFMLENBQVlJLElBQVosRUFBa0JFLE9BQWxCLENBQTBCRCxFQUExQixDQUFSO0FBQ0EsUUFBSUksTUFBTSxDQUFDLENBQVgsRUFBYztBQUNaLFdBQUtULE1BQUwsQ0FBWUksSUFBWixFQUFrQk0sTUFBbEIsQ0FBeUJELENBQXpCLEVBQTRCLENBQTVCO0FBQ0Q7QUFDRjs7QUFFRCxTQUFPLElBQVA7QUFDRCxDQVREOztBQVdBWCxVQUFVSSxTQUFWLENBQW9CUyxNQUFwQixHQUE2QixVQUFVUCxJQUFWLEVBQWdCUSxJQUFoQixFQUFzQjtBQUNqRCxNQUFJLEtBQUtaLE1BQUwsQ0FBWUksSUFBWixDQUFKLEVBQXVCO0FBQ3JCLFNBQUtKLE1BQUwsQ0FBWUksSUFBWixFQUFrQlMsT0FBbEIsQ0FBMEIsVUFBVVIsRUFBVixFQUFjO0FBQ3RDQSxTQUFHUyxJQUFILENBQVEsSUFBUixFQUFjRixJQUFkO0FBQ0QsS0FGeUIsQ0FFeEJHLElBRndCLENBRW5CLElBRm1CLENBQTFCO0FBR0Q7QUFDRixDQU5EOztBQVFBakIsVUFBVUksU0FBVixDQUFvQmMsUUFBcEIsR0FBK0IsWUFBWTtBQUN6QyxPQUFLaEIsTUFBTCxHQUFjLEVBQWQ7QUFDRCxDQUZEOztBQUlBaUIsT0FBT0MsT0FBUCxHQUFpQnBCLFNBQWpCIiwiZmlsZSI6Ikxpc3RlbmVycy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBMaXN0ZW5lcnMgPSBmdW5jdGlvbiAob3B0cykge1xuICB0aGlzLmV2ZW50cyA9IHt9XG59XG5cbkxpc3RlbmVycy5jcmVhdGUgPSBmdW5jdGlvbiAob3B0cykge1xuICByZXR1cm4gbmV3IExpc3RlbmVycyhvcHRzKVxufVxuXG5MaXN0ZW5lcnMucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gIGlmICghdGhpcy5ldmVudHNbdHlwZV0pIHtcbiAgICB0aGlzLmV2ZW50c1t0eXBlXSA9IFtdXG4gIH1cblxuICBpZiAodGhpcy5ldmVudHNbdHlwZV0uaW5kZXhPZihmbikgPT09IC0xKSB7XG4gICAgdGhpcy5ldmVudHNbdHlwZV0ucHVzaChmbilcbiAgfVxuXG4gIHJldHVybiB0aGlzXG59XG5cbkxpc3RlbmVycy5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gIGlmICh0aGlzLmV2ZW50c1t0eXBlXSkge1xuICAgIHZhciBpID0gdGhpcy5ldmVudHNbdHlwZV0uaW5kZXhPZihmbilcbiAgICBpZiAoaSAhPT0gLTEpIHtcbiAgICAgIHRoaXMuZXZlbnRzW3R5cGVdLnNwbGljZShpLCAxKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzXG59XG5cbkxpc3RlbmVycy5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24gKHR5cGUsIGRhdGEpIHtcbiAgaWYgKHRoaXMuZXZlbnRzW3R5cGVdKSB7XG4gICAgdGhpcy5ldmVudHNbdHlwZV0uZm9yRWFjaChmdW5jdGlvbiAoZm4pIHtcbiAgICAgIGZuLmNhbGwodGhpcywgZGF0YSlcbiAgICB9LmJpbmQodGhpcykpXG4gIH1cbn1cblxuTGlzdGVuZXJzLnByb3RvdHlwZS5jbGVhckFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5ldmVudHMgPSB7fVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IExpc3RlbmVyc1xuIl19